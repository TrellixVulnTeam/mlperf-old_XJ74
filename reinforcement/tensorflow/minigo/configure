#!/usr/bin/env bash

# Running this file will generate a bazelrc file (referenced
# from the .bazelrc file in this directory) which can be copy-
# pasted into tools/tf_configure.rc.

export PYTHON_BIN_PATH="/usr/bin/python"
export PYTHON_LIB_PATH="/usr/local/lib/python2.7/dist-packages"

export TF_NEED_JEMALLOC=1

export TF_NEED_GCP="0"
export TF_NEED_HDFS="0"
export TF_NEED_AWS="0"
export TF_NEED_KAFKA="0"

export TF_NEED_OPENCL_SYCL="0"

export TF_NEED_CUDA="1"
export TF_CUDA_VERSION="9.0"
export CUDA_TOOLKIT_PATH="/usr/local/cuda"
export TF_CUDA_COMPUTE_CAPABILITIES="6.1,6.1"

export TF_CUDNN_VERSION="7"
export CUDNN_INSTALL_PATH="/usr/local/cuda"

export TF_NEED_TENSORRT="1"
export TF_TENSORRT_VERSION="4.1.2"
export TENSORRT_INSTALL_PATH="/usr/lib/x86_64-linux-gnu"

export TF_NCCL_VERSION="1"

export TF_CUDA_CLANG="1"
export TF_DOWNLOAD_CLANG="1"

export TF_ENABLE_XLA="1"
export TF_NEED_GDR="0"
export TF_NEED_VERBS="0"
export TF_NEED_MPI="0"
export TF_SET_ANDROID_WORKSPACE="0"

export CC_OPT_FLAGS="-match=native"

bazel run @org_tensorflow//:configure -- --workspace $(pwd)

